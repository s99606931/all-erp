# Task: ê´€ì¸¡ì„± ì¸í”„ë¼ êµ¬ì¶• (Setup Observability)

## 1. ê°œìš” (Overview)
- **ëª©í‘œ**: 17ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ë¡œê·¸, ë©”íŠ¸ë¦­, íŠ¸ë ˆì´ì‹±ì„ ì¤‘ì•™ì—ì„œ í†µí•© ê´€ë¦¬í•˜ê¸° ìœ„í•œ LGTM Stack(Loki, Grafana, Tempo, Prometheus) êµ¬ì¶•
- **ì‘ì—… ìœ í˜•**: ì¸í”„ë¼ ì„¤ì • (Docker Compose)
- **ê´€ë ¨ ë¬¸ì„œ**: `docs/tasks-backup/phase1-stabilization/1.3_setup_observability.md` (ì°¸ê³ ìš©)

## 2. ìƒì„¸ ì‘ì—… ê³„íš (Detailed Plan)

### 2.1 ğŸ› ï¸ Config íŒŒì¼ ì¤€ë¹„
`dev-environment/config` ë””ë ‰í† ë¦¬ í•˜ìœ„ì— ê° ì„œë¹„ìŠ¤ ì„¤ì • íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

- **Prometheus** (`config/prometheus/prometheus.yml`)
  - 17ê°œ NestJS ì„œë¹„ìŠ¤ì˜ `/metrics` ì—”ë“œí¬ì¸íŠ¸ ìŠ¤í¬ë© ì„¤ì •
  - `docker.internal.host` ë˜ëŠ” ê° ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆëª… ê¸°ë°˜ íƒ€ê²Ÿ ì •ì˜
- **Loki** (`config/loki/loki.yaml`)
  - ë¡œê·¸ ìˆ˜ì§‘ ë° ì €ì¥ ì„¤ì •
- **Tempo** (`config/tempo/tempo.yaml`)
  - OpenTelemetry Trace ìˆ˜ì‹  ì„¤ì • (gRPC 4317, HTTP 4318)
- **Grafana** (`config/grafana/provisioning/...`)
  - Datasource ìë™ ì—°ê²° (Loki, Prometheus, Tempo)

### 2.2 ğŸ³ Docker Compose ì—…ë°ì´íŠ¸
`dev-environment/docker-compose.infra.yml`ì— ë‹¤ìŒ ì»¨í…Œì´ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

- **Grafana**: `grafana/grafana:latest` (Port 3000)
- **Prometheus**: `prom/prometheus:latest` (Port 9090)
- **Loki**: `grafana/loki:latest` (Port 3100)
- **Tempo**: `grafana/tempo:latest` (Port 3200, 4317, 4318)

### 2.3 ğŸ” ê²€ì¦ (Verification)
1. `docker compose -f docker-compose.infra.yml up -d` ì‹¤í–‰
2. Grafana ì ‘ì† (http://localhost:3000) í™•ì¸
3. Datasource (Loki, Prometheus, Tempo) ì—°ê²° ìƒíƒœ Test

## 3. ìˆ˜ì • ì˜ˆì • íŒŒì¼ (Files to Modify)
- `[NEW] dev-environment/config/prometheus/prometheus.yml`
- `[NEW] dev-environment/config/loki/loki.yaml`
- `[NEW] dev-environment/config/tempo/tempo.yaml`
- `[NEW] dev-environment/config/grafana/provisioning/datasources/datasource.yml`
- `[MODIFY] dev-environment/docker-compose.infra.yml`

## 4. ì™„ë£Œ ì¡°ê±´ (Definition of Done)
- [ ] `docker-compose.infra.yml` ì‹¤í–‰ ì‹œ ì—ëŸ¬ ì—†ì´ ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ëœ¬ë‹¤.
- [ ] Grafanaì—ì„œ 3ê°€ì§€ Datasourceê°€ ì •ìƒì ìœ¼ë¡œ 'OK' ì‘ë‹µì„ ë°›ëŠ”ë‹¤.
