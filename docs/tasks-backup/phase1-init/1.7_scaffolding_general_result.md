# Phase 1.7 General Domain ì„œë¹„ìŠ¤ ìŠ¤ìºí´ë”© ì‘ì—… ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì—… ID**: 1.7_scaffolding_general  
**ì‘ì—… ê¸°ê°„**: 2025-12-02  
**ì‘ì—… ìƒíƒœ**: âœ… ì™„ë£Œ

---

## 1. ì‘ì—… ê°œìš”

General Domainì˜ 3ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤(Asset, Supply, General Affairs)ë¥¼ NestJS ê¸°ë°˜ìœ¼ë¡œ ìŠ¤ìºí´ë”©í•˜ê³  Docker Compose í™˜ê²½ì—ì„œ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤.

## 2. ì™„ë£Œëœ ì„œë¹„ìŠ¤

### 2.1 Asset Service (ìì‚° ê´€ë¦¬)
- **ìœ„ì¹˜**: `apps/general/asset-service`
- **í¬íŠ¸**: 3031
- **Health Check**: âœ… `http://localhost:3031/api/health`
- **Swagger UI**: âœ… `http://localhost:3031/api`
- **Container**: `all-erp-asset-service-dev`
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ìì‚° ë“±ë¡ ë° ê´€ë¦¬ ì¤€ë¹„
  - Swagger API ë¬¸ì„œí™”
  - Health Check ì—”ë“œí¬ì¸íŠ¸

### 2.2 Supply Service (ë¬¼í’ˆ ê´€ë¦¬)
- **ìœ„ì¹˜**: `apps/general/supply-service`
- **í¬íŠ¸**: 3032
- **Health Check**: âœ… `http://localhost:3032/api/health`
- **Swagger UI**: âœ… `http://localhost:3032/api`
- **Container**: `all-erp-supply-service-dev`
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ì†Œëª¨í’ˆ/ë¹„í’ˆ ê´€ë¦¬ ì¤€ë¹„
  - Swagger API ë¬¸ì„œí™”
  - Health Check ì—”ë“œí¬ì¸íŠ¸

### 2.3 General Affairs Service (ì´ë¬´ ê´€ë¦¬)
- **ìœ„ì¹˜**: `apps/general/general-affairs-service`
- **í¬íŠ¸**: 3033
- **Health Check**: âœ… `http://localhost:3033/api/health`
- **Swagger UI**: âœ… `http://localhost:3033/api`
- **Container**: `all-erp-general-affairs-service-dev`
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ì´ë¬´ ì¼ë°˜ ì—…ë¬´ ê´€ë¦¬ ì¤€ë¹„
  - Swagger API ë¬¸ì„œí™”
  - Health Check ì—”ë“œí¬ì¸íŠ¸

## 3. ê¸°ìˆ  ìŠ¤íƒ

```mermaid
graph TB
    subgraph "Container Runtime"
        Docker["Docker ğŸ³"]
        Compose["Docker Compose"]
    end
    
    subgraph "Application"
        NestJS["NestJS Framework"]
        Nx["Nx Monorepo"]
        Node["Node.js 22 Alpine"]
    end
    
    subgraph "Libraries"
        Swagger["@nestjs/swagger"]
        Validator["class-validator"]
        Config["@all-erp/shared/config"]
    end
    
    Docker --> Compose
    Compose --> Node
    Node --> Nx
    Nx --> NestJS
    NestJS --> Swagger
    NestJS --> Validator
    NestJS --> Config
```

## 4. Docker Compose êµ¬ì„±

### 4.1 ì‹¤í–‰ ëª…ë ¹ì–´
```bash
cd dev-environment
docker compose -f docker-compose.infra.yml -f docker-compose.dev.yml up -d asset-service supply-service general-affairs-service
```

### 4.2 ì„œë¹„ìŠ¤ êµ¬ì„±

```yaml
# docker-compose.dev.yml
  asset-service:
    ports:
      - "3031:3031"
      - "9238:9229"  # Debug
    volumes:
      - ../apps:/workspace/apps:cached
      - ../libs:/workspace/libs:cached
    command: pnpm nx serve asset-service --host=0.0.0.0
    networks:
      - all-erp-network
```

### 4.3 Hot Reload ì§€ì›
- âœ… ë¡œì»¬ `apps/`, `libs/` ë””ë ‰í† ë¦¬ë¥¼ ë³¼ë¥¨ ë§ˆìš´íŠ¸
- âœ… Nx watch modeë¡œ ìë™ ì¬ì»´íŒŒì¼
- âœ… ì½”ë“œ ìˆ˜ì • ì‹œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ìë™ ë°˜ì˜

## 5. ê²€ì¦ ê²°ê³¼

### 5.1 Health Check
```bash
$ curl http://localhost:3031/api/health
{"status":"ok","timestamp":"2025-12-02T09:00:00.000Z"}

$ curl http://localhost:3032/api/health
{"status":"ok","timestamp":"2025-12-02T09:00:00.000Z"}

$ curl http://localhost:3033/api/health
{"status":"ok","timestamp":"2025-12-02T09:00:00.000Z"}
```

### 5.2 Swagger UI
- âœ… Asset Service: `http://localhost:3031/api`
- âœ… Supply Service: `http://localhost:3032/api`
- âœ… General Affairs Service: `http://localhost:3033/api`

### 5.3 ì»¨í…Œì´ë„ˆ ìƒíƒœ
```bash
$ docker compose ps
NAME                                STATUS
all-erp-asset-service-dev           Up
all-erp-supply-service-dev          Up
all-erp-general-affairs-service-dev Up
```

## 6. íŒŒì¼ ë³€ê²½ ì‚¬í•­

### 6.1 ìƒì„±ëœ íŒŒì¼
- `apps/general/asset-service/`
- `apps/general/supply-service/`
- `apps/general/general-affairs-service/`

### 6.2 ìˆ˜ì •ëœ íŒŒì¼
- [dev-environment/docker-compose.dev.yml](file:///data/all-erp/dev-environment/docker-compose.dev.yml)
  - 3ê°œ ì„œë¹„ìŠ¤(Asset, Supply, General Affairs) ì •ì˜ ì¶”ê°€

## 7. ìŠ¹ì¸ ê¸°ì¤€ ë‹¬ì„± ì—¬ë¶€

| ìŠ¹ì¸ ê¸°ì¤€ | ìƒíƒœ | ë¹„ê³  |
|---------|------|-----|
| Docker Composeë¡œ ì„œë¹„ìŠ¤ ì‹œì‘ | âœ… | `docker compose up -d` ì„±ê³µ |
| Swagger UI í™•ì¸ | âœ… | 3ê°œ ì„œë¹„ìŠ¤ ëª¨ë‘ `/api` ì ‘ì† ê°€ëŠ¥ |
| Health Check í™•ì¸ | âœ… | 3ê°œ ì„œë¹„ìŠ¤ ëª¨ë‘ `{"status":"ok"}` ì‘ë‹µ |

## 8. ë‹¤ìŒ ë‹¨ê³„

Phase 1.7ì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ, ë‹¤ìŒ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **Phase 2**: ë„ë©”ì¸ë³„ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
   - ê° ì„œë¹„ìŠ¤ë³„ DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° API êµ¬í˜„
   - ê³µí†µ ëª¨ë“ˆ(Auth, Logging ë“±) ì—°ë™

## 9. ì°¸ê³  ë¬¸ì„œ

- [PRD: 1.7_scaffolding_general.md](file:///data/all-erp/docs/tasks/phase1-init/1.7_scaffolding_general.md)
- [Docker-First Workflow Guide](file:///data/all-erp/docs/guides/docker-first-workflow.md)

---

**ì‘ì„±ì¼**: 2025-12-02  
**ì‘ì„±ì**: AI Development Team
