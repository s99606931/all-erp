# Task 1.1: Fix Prisma & OpenSSL Compatibility

## 1. 개요 (Overview)

- **Task ID**: 1.1
- **목표**: Alpine Linux와 Prisma Client 간의 OpenSSL 호환성 문제를 해결하여 모든 마이크로서비스가 정상적으로 실행되도록 한다.
- **관련 이슈**: `libssl.so.1.1: No such file or directory` 에러로 인한 부트스트랩 실패

## 2. 상세 요구사항 (Requirements)

1.  **Base Image 교체**: `node:alpine` 계열 대신 `node:22-slim` (Debian Bookworm 기반)을 사용하여 OpenSSL 3.x 호환성을 네이티브하게 확보한다.
2.  **Prisma Binary Target 수정**: 필요한 경우 `schema.prisma`에 `debian-openssl-3.0.x` 타겟을 명시한다.
3.  **검증**: 17개 모든 서비스가 `docker compose up`으로 정상 실행(Healthy)되어야 한다.

## 3. 기술적 의사결정 (Technical Decisions)

- **Base Image**:
  - [ ] `node:22-alpine` (+ openssl package)
  - [x] **`node:22-slim` (권장)**: 빌드 사이즈는 약간 크지만 호환성 문제가 적고 빌드 속도가 빠름.
- **Docker Multi-stage Build**:
  - 운영(Production) 이미지와 개발(Development) 이미지 모두 변경 적용.

## 4. 작업 단위 (Work Units)

1.  **`dev-environment/Dockerfile.dev` 수정**:
    - `FROM node:22-alpine` -> `FROM node:22-slim`
    - `apt-get`을 사용하여 필수 패키지(procpus, openssl 등) 설치 ( `apk` 대신)
2.  **`libs/shared/database/*/prisma/schema.prisma` 확인**:
    - `binaryTargets`에 `debian-openssl-3.0.x`가 포함되어 있는지 확인 (없으면 추가하지 않아도 자동 감지되지만, 명시가 안전함)
3.  **서비스 재빌드 및 실행**:
    - `docker compose -f docker-compose.dev.yml build`
    - `docker compose -f docker-compose.dev.yml up -d`

## 5. 승인 기준 (Acceptance Criteria)

- [ ] `docker compose logs auth-service` 확인 시 에러 없이 `Nest application successfully started` 로그가 출력되어야 한다.
- [ ] 17개 서비스 컨테이너가 모두 `Up` 상태여야 한다.
