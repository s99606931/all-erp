# PRD: 최종 테스트 및 운영 배포

## 1. 개요 (Overview)
- **Task ID**: 6.3_final_deployment
- **목표**: 통합 테스트를 완료하고, 운영 환경에 안정적으로 배포하여 서비스를 이관합니다.
- **관련 로드맵**: Phase 6 - 최종 테스트 및 배포

## 2. 상세 요구사항 (Requirements)

### 2.1 E2E (End-to-End) 테스트
- [ ] **주요 사용자 시나리오**: 로그인 → 직원 등록 → 급여 계산 → 예산 집행 등 실제 업무 흐름 자동화 테스트
- [ ] **도구**: Cypress 또는 Playwright
- [ ] **CI 통합**: PR 생성 시 자동으로 E2E 테스트 실행

### 2.2 운영 환경 배포
- [ ] **배포 전략**: Blue-Green 또는 Canary 배포로 무중단 배포
- [ ] **롤백 계획**: 배포 실패 시 이전 버전으로 즉시 롤백 가능하도록 준비
- [ ] **운영 문서 작성**: 배포 절차, 장애 대응 매뉴얼 작성

### 2.3 사용자 교육 및 이관
- [ ] **사용자 매뉴얼**: 각 기능별 사용 가이드 작성
- [ ] **교육 세션**: 실제 사용자 대상 시스템 사용 교육
- [ ] **피드백 수집**: 초기 사용 후 개선 요청사항 수집

## 3. 기술적 의사결정 (Technical Decisions)

### 3.1 E2E 테스트 도구
- **✅ 권장사항**: **Playwright**
    - **이유**: 크로스 브라우저 지원, 빠른 실행 속도, TypeScript 네이티브 지원

### 3.2 배포 전략
- **✅ 권장사항**: **Blue-Green Deployment** (초기) → **Canary** (안정화 후)
    - **이유**: Blue-Green은 빠른 롤백이 가능하고, Canary는 리스크를 최소화합니다.

## 4. 작업 단위 (Work Breakdown)

1.  **E2E 테스트 구현**:
    - Playwright 설치 및 시나리오 작성
    - 주요 사용자 시나리오 자동화

2.  **CI/CD 파이프라인 통합**:
    - GitLab CI에 E2E 테스트 추가
    - PR 생성 시 자동 실행

3.  **Docker Compose로 E2E 테스트**:
    ```bash
    # 전체 환경 실행
    cd dev-environment
    docker compose -f docker-compose.infra.yml -f docker-compose.dev.yml up -d
    
    # E2E 테스트 실행
    cd ..
    pnpm exec playwright test
    
    # 테스트 결과 확인
    pnpm exec playwright show-report
    ```

4.  **운영 환경 배포**:
    - `docker-compose.prod.yml` 사용
    - Blue-Green 배포 스크립트 작성
    ```bash
    # 운영 환경 배포
    cd dev-environment
    docker compose -f docker-compose.infra.yml -f docker-compose.prod.yml up -d
    ```

5.  **사용자 매뉴얼 및 교육 자료 제작**

6.  **최종 배포 및 모니터링**

> **참고**: [Docker-First Workflow Guide](../../guides/docker-first-workflow.md)

## 5. 승인 기준 (Acceptance Criteria)
- [ ] **E2E 테스트**: Docker Compose 환경에서 E2E 테스트 모두 통과 (성공률 100%)
- [ ] **안정성**: 운영 환경 배포 후 24시간 동안 Critical 에러 0건
- [ ] **사용성**: 사용자가 매뉴얼만 보고 기본 기능 사용 가능
- [ ] **롤백 테스트**: 배포 실패 시나리오에서 이전 버전으로 즉시 롤백 성공
