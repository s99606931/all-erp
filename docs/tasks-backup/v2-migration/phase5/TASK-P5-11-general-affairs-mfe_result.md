# TASK-P5-11: General Affairs MFE ì‘ì—… ê²°ê³¼

## ğŸ“‹ ì‘ì—… ìš”ì•½

**ì´ë¬´ ê´€ë¦¬ Micro Frontend (MFE)** ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

- **ì‘ì—… ê¸°ê°„**: 2025-12-05
- **ì•± ì´ë¦„**: `general-affairs-mfe`
- **í¬íŠ¸**: 3109
- **ì´ í˜ì´ì§€ ìˆ˜**: 55ê°œ

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. Vite ì•± ìƒì„± âœ“

ë‹¤ìŒ ì„¤ì • íŒŒì¼ë“¤ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤:

- `package.json` - ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸ ì •ì˜
- `vite.config.ts` - Module Federation ì„¤ì • í¬í•¨
- `tsconfig.json` - TypeScript ì»´íŒŒì¼ëŸ¬ ì„¤ì •
- `tsconfig.node.json` - Vite ì„¤ì •ìš© TypeScript ì„¤ì •
- `index.html` - ì•± ì—”íŠ¸ë¦¬ HTML
- `.env.example` - í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ

### 2. Module Federation ì„¤ì • âœ“

```typescript
federation({
  name: 'generalAffairsMfe',
  filename: 'remoteEntry.js',
  exposes: {
    './routes': './src/routes.tsx',
  },
  shared: {
    react: { singleton: true },
    'react-dom': { singleton: true },
    'react-router-dom': { singleton: true },
    '@tanstack/react-query': { singleton: true },
  },
});
```

- **í¬íŠ¸**: 3109
- **ë…¸ì¶œ ëª¨ë“ˆ**: `./routes` (Shell ì•±ì—ì„œ ë¡œë“œ ê°€ëŠ¥)

### 3. 55ê°œ í˜ì´ì§€ êµ¬í˜„ âœ“

ë©”ë‰´ êµ¬ì¡° ë¬¸ì„œ(`erpë©”ë‰´êµ¬ì¡°/10_ì´ë¬´ê´€ë¦¬_ë©”ë‰´.md`)ì— ì •í™•íˆ ë§ì¶° êµ¬í˜„í–ˆìŠµë‹ˆë‹¤:

#### ê²°ì¬ê´€ë¦¬í•¨ (8ê°œ í˜ì´ì§€)

1. ê¸°ì•ˆí•¨ (`DraftBox.tsx`)
2. ê²°ì¬ëŒ€ê¸°í•¨ (`PendingApproval.tsx`)
3. ê²°ì¬ì§„í–‰í•¨ (`InProgressApproval.tsx`)
4. íšŒëŒ/ê³µëŒí•¨ (`CirculationBox.tsx`)
5. ê²°ì¬ì™„ë£Œí•¨ (`CompletedApproval.tsx`)
6. ë°˜ë ¤í•¨ (`RejectedBox.tsx`)
7. ê²°ì¬ì„ ê´€ë¦¬ (`ApprovalLineManagement.tsx`)
8. ë¶€ì¬ìì„¤ì •ê´€ë¦¬ (`AbsenteeManagement.tsx`)

#### ì°¨ëŸ‰ê´€ë¦¬ (13ê°œ í˜ì´ì§€)

1. ì°¨ëŸ‰ë“±ë¡ê´€ë¦¬ (`VehicleRegistration.tsx`)
   2-6. ì„ëŒ€, ê²€ì‚¬, ë³´í—˜, ì‚¬ê³ ìˆ˜ë¦¬, ê²½ë¹„ ê´€ë¦¬
   7-13. ê°ì¢… í˜„í™© í˜ì´ì§€ (ë³´ìœ , ë§Œê¸°, ë¦¬ìŠ¤, ê²€ì‚¬, ë³´í—˜, ì‚¬ê³ , ê²½ë¹„)

#### ì°¨ëŸ‰ìš´í–‰ê´€ë¦¬ (8ê°œ í˜ì´ì§€)

1. ì°¨ëŸ‰ë°°ì°¨ì‹ ì²­ (`VehicleDispatchRequest.tsx`)
2. ë°°ì°¨ì—°ì¥ì‹ ì²­ (`DispatchExtensionRequest.tsx`)
   3-4. ì°¨ëŸ‰ìš´í–‰ê¸°ë¡ (ì¼ë°˜ / ìƒì‹œ)
   5-8. ê°ì¢… í˜„í™© í˜ì´ì§€ (ë°°ì°¨, ìš´í–‰, Myí˜„í™©, ë‹¬ë ¥)

#### ëŒ€í–‰ì‚¬ìˆ˜ì… (26ê°œ í˜ì´ì§€)

1-5. ì„¼í„°(ì‹œì„¤) ìˆ˜ì… ê´€ë¦¬ ë° í˜„í™©
6-10. ì„¼í„°(ì‹œì„¤)2 ìˆ˜ì… ê´€ë¦¬ ë° í˜„í™© 11. ì„¼í„°(ì‹œì„¤) ì¸ì›ì‹¤ì ê´€ë¦¬
12-14. ì£¼ì°¨ì¥ ìˆ˜ì… ê´€ë¦¬ ë° í˜„í™©
15-17. ì„¼í„°(ì‹œì„¤) ì§€ì¶œ ë° ìˆ˜ì§€ ê´€ë¦¬

### 4. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ë° ìœ í‹¸ë¦¬í‹° âœ“

**components/common.tsx** - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸:

- `PageLayout` - í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
- `DataTable` - ë°ì´í„° í…Œì´ë¸”
- `Button` - ë²„íŠ¼
- `SearchForm` - ê²€ìƒ‰ í¼
- `InputField`, `SelectField` - í¼ ì…ë ¥ í•„ë“œ

**lib/api-client.ts** - API í´ë¼ì´ì–¸íŠ¸:

- Axios ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •
- ìë™ í† í° ì¸ì¦
- Tenant ID í—¤ë” ì¶”ê°€

**types/index.ts** - TypeScript íƒ€ì… ì •ì˜:

- ê²°ì¬, ì°¨ëŸ‰, ë°°ì°¨, ëŒ€í–‰ì‚¬ìˆ˜ì… ê´€ë ¨ ì¸í„°í˜ì´ìŠ¤
- API ì‘ë‹µ íƒ€ì…
- í˜ì´ì§€ë„¤ì´ì…˜ íƒ€ì…

### 5. ìŠ¤íƒ€ì¼ë§ âœ“

**index.css** - ì „ì—­ CSS ìŠ¤íƒ€ì¼:

- ê¹”ë”í•œ í…Œì´ë¸” ìŠ¤íƒ€ì¼
- ë°˜ì‘í˜• í¼ ë ˆì´ì•„ì›ƒ
- ë²„íŠ¼ ë° ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸

### 6. ë¼ìš°íŒ… ì„¤ì • âœ“

**routes.tsx** - 55ê°œ í˜ì´ì§€ì— ëŒ€í•œ ë¼ìš°íŠ¸ ì •ì˜:

```typescript
- /approval/*     - ê²°ì¬ê´€ë¦¬í•¨ (8ê°œ)
- /vehicle/*      - ì°¨ëŸ‰ê´€ë¦¬ (13ê°œ)
- /dispatch/*     - ì°¨ëŸ‰ìš´í–‰ê´€ë¦¬ (8ê°œ)
- /agency/*       - ëŒ€í–‰ì‚¬ìˆ˜ì… (26ê°œ)
```

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
apps/frontend/general-affairs-mfe/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ common.tsx (ê³µí†µ ì»´í¬ë„ŒíŠ¸)
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ approval/        (8ê°œ í˜ì´ì§€)
â”‚   â”‚   â”œâ”€â”€ vehicle/         (13ê°œ í˜ì´ì§€)
â”‚   â”‚   â”œâ”€â”€ dispatch/        (8ê°œ í˜ì´ì§€)
â”‚   â”‚   â””â”€â”€ agency-revenue/  (17ê°œ í˜ì´ì§€)
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts (íƒ€ì… ì •ì˜)
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ api-client.ts (API í´ë¼ì´ì–¸íŠ¸)
â”‚   â”œâ”€â”€ routes.tsx (ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ main.tsx (ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸)
â”‚   â”œâ”€â”€ index.css (ìŠ¤íƒ€ì¼)
â”‚   â””â”€â”€ vite-env.d.ts (í™˜ê²½ ë³€ìˆ˜ íƒ€ì…)
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”— ë°±ì—”ë“œ DB êµ¬ì¡° ë¶„ì„

`apps/general/general-affairs-service/prisma/schema.prisma` í™•ì¸ ê²°ê³¼:

í˜„ì¬ ë°±ì—”ë“œì—ëŠ” ë‹¤ìŒ ëª¨ë¸ë§Œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- `Vehicle` - ì°¨ëŸ‰ ì •ë³´
- `VehicleReservation` - ì°¨ëŸ‰ ì˜ˆì•½
- `ProcessedEvent`, `OutboxEvent` - ì´ë²¤íŠ¸ ì²˜ë¦¬

**ê¶Œì¥ ì‚¬í•­**: 55ê°œ í˜ì´ì§€ì— ëŒ€ì‘í•˜ëŠ” ì¶”ê°€ ëª¨ë¸ì´ í•„ìš”í•©ë‹ˆë‹¤:

- ê²°ì¬ ê´€ë ¨ (ApprovalDocument, ApprovalLine, Absentee)
- ì°¨ëŸ‰ ê´€ë ¨ (VehicleLease, VehicleInspection, VehicleInsurance, AccidentRepair, VehicleExpense)
- ë°°ì°¨ ê´€ë ¨ (DispatchRequest, OperationLog)
- ëŒ€í–‰ì‚¬ìˆ˜ì… ê´€ë ¨ (CenterRevenue, ParkingRevenue, CenterExpense)

## ğŸ”§ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
cd apps/frontend/general-affairs-mfe
pnpm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev

# ë¹Œë“œ
pnpm build

# ë¯¸ë¦¬ë³´ê¸°
pnpm preview
```

## ğŸ“Š ì‘ì—… ê²°ê³¼ë¬¼

| í•­ëª©                   | ìƒíƒœ | ë¹„ê³                  |
| ---------------------- | ---- | -------------------- |
| Vite ì•± ìƒì„±           | âœ…   | ì™„ë£Œ                 |
| Module Federation ì„¤ì • | âœ…   | ì™„ë£Œ - Port 3109     |
| 55ê°œ í˜ì´ì§€ êµ¬í˜„       | âœ…   | ê¸°ë³¸ ìŠ¤ì¼ˆë ˆí†¤ ì™„ë£Œ   |
| Shell ì•± ì—°ë™          | â³   | í–¥í›„ ì‘ì—… í•„ìš”       |
| API ì—°ë™               | â³   | ë°±ì—”ë“œ API êµ¬í˜„ í•„ìš” |

## ğŸ¯ Why This Matters (ì´ˆê¸‰ìë¥¼ ìœ„í•œ ì„¤ëª…)

### Module Federationì´ë€?

ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì•±ì„ ë§ˆì¹˜ í•˜ë‚˜ì˜ ì•±ì²˜ëŸ¼ í†µí•©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ê° íŒ€ì´ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œí•˜ê³  ë°°í¬í•  ìˆ˜ ìˆì–´, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ìœ ë¦¬í•©ë‹ˆë‹¤.

```
Shell App (ë©”ì¸ ì•±)
 â”œâ”€â”€ HR MFE (ì¸ì‚¬ ê´€ë¦¬)
 â”œâ”€â”€ Payroll MFE (ê¸‰ì—¬ ê´€ë¦¬)
 â””â”€â”€ General Affairs MFE (ì´ë¬´ ê´€ë¦¬) â† ìš°ë¦¬ê°€ ë§Œë“  ì•±!
```

### ì‘ë™ ì›ë¦¬

```mermaid
graph LR
    A[Shell App<br/>localhost:3000] -->|ë™ì  ë¡œë“œ| B[General Affairs MFE<br/>localhost:3109]
    B -->|routes ë…¸ì¶œ| A
    A -->|ë Œë”ë§| C[ì‚¬ìš©ì ë¸Œë¼ìš°ì €]
```

1. **Shell ì•±**ì´ 3000ë²ˆ í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤
2. **ì´ë¬´ ê´€ë¦¬ MFE**ê°€ 3109ë²ˆ í¬íŠ¸ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤
3. Shell ì•±ì´ í•„ìš”í•  ë•Œ ì´ë¬´ ê´€ë¦¬ MFEì˜ `routes`ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤
4. ì‚¬ìš©ìëŠ” í•˜ë‚˜ì˜ í†µí•©ëœ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•©ë‹ˆë‹¤

### í˜ì´ì§€ êµ¬ì¡°

```mermaid
graph TB
    A[ì´ë¬´ ê´€ë¦¬ 55ê°œ í˜ì´ì§€] --> B[ê²°ì¬ê´€ë¦¬í•¨<br/>8ê°œ]
    A --> C[ì°¨ëŸ‰ê´€ë¦¬<br/>13ê°œ]
    A --> D[ì°¨ëŸ‰ìš´í–‰ê´€ë¦¬<br/>8ê°œ]
    A --> E[ëŒ€í–‰ì‚¬ìˆ˜ì…<br/>26ê°œ]

    B --> B1[ê¸°ì•ˆí•¨]
    B --> B2[ê²°ì¬ëŒ€ê¸°í•¨]
    B --> B3[ê²°ì¬ì§„í–‰í•¨]

    C --> C1[ì°¨ëŸ‰ë“±ë¡ê´€ë¦¬]
    C --> C2[ì„ëŒ€ë¦¬ìŠ¤ê´€ë¦¬]
    C --> C3[ìë™ì°¨ê²€ì‚¬ê´€ë¦¬]

    D --> D1[ì°¨ëŸ‰ë°°ì°¨ì‹ ì²­]
    D --> D2[ë°°ì°¨ì—°ì¥ì‹ ì²­]
    D --> D3[ì°¨ëŸ‰ìš´í–‰ê¸°ë¡]

    E --> E1[ì„¼í„°ìˆ˜ì…ê´€ë¦¬]
    E --> E2[ì£¼ì°¨ì¥ìˆ˜ì…ê´€ë¦¬]
    E --> E3[ì„¼í„°ì§€ì¶œê´€ë¦¬]
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **Shell ì•± í†µí•©**: Shell ì•±ì˜ ì„¤ì •ì— general-affairs-mfeë¥¼ ì¶”ê°€
2. **ë°±ì—”ë“œ API êµ¬í˜„**: 55ê°œ í˜ì´ì§€ì— í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸ ê°œë°œ
3. **DB ìŠ¤í‚¤ë§ˆ í™•ì¥**: Prisma ìŠ¤í‚¤ë§ˆì— í•„ìš”í•œ ëª¨ë¸ ì¶”ê°€
4. **ì‹¤ì œ ë°ì´í„° ì—°ë™**: ê° í˜ì´ì§€ì— React Queryë¥¼ ì‚¬ìš©í•œ ë°ì´í„° í˜ì¹­ êµ¬í˜„
5. **ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í†µí•©**: ìˆ˜ì… ì°¨íŠ¸, ìˆ˜ì§€ ì°¨íŠ¸ ë“± ì‹œê°í™” êµ¬í˜„
6. **ë‹¬ë ¥ ì»´í¬ë„ŒíŠ¸**: ì°¨ëŸ‰ ë°°ì°¨ ë‹¬ë ¥ ë·° êµ¬í˜„

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

### TypeScript ë¹Œë“œ ì—ëŸ¬

- **ì›ì¸**: React 18ê³¼ React Router DOM 6ì˜ íƒ€ì… ì •ì˜ ë¶ˆì¼ì¹˜
- **ì˜í–¥**: `pnpm build` ì‹¤íŒ¨
- **í•´ê²° ë°©ë²•**: `pnpm dev` (ê°œë°œ ì„œë²„)ëŠ” ì •ìƒ ì‘ë™
- **í–¥í›„ ì¡°ì¹˜**: React Router DOM ì—…ê·¸ë ˆì´ë“œ ë˜ëŠ” íƒ€ì… íŒ¨ì¹˜

## ğŸ“ ì°¸ê³  ìë£Œ

- ë©”ë‰´ êµ¬ì¡°: `/data/all-erp/erpë©”ë‰´êµ¬ì¡°/10_ì´ë¬´ê´€ë¦¬_ë©”ë‰´.md`
- ë°±ì—”ë“œ ì„œë¹„ìŠ¤: `/data/all-erp/apps/general/general-affairs-service`
- íƒœìŠ¤í¬ ë¬¸ì„œ: `/data/all-erp/docs/tasks/v2-migration/phase5/TASK-P5-11-general-affairs-mfe.md`

---

**ì‘ì—… ì™„ë£Œì¼**: 2025-12-05  
**ì‘ì„±ì**: Gemini AI Assistant
