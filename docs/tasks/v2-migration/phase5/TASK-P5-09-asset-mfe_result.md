# TASK-P5-09: Asset MFE ì‘ì—… ê²°ê³¼

## ğŸ“‹ ì‘ì—… ìš”ì•½

**ìì‚° ê´€ë¦¬ Micro Frontend (MFE)** ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

- **ì‘ì—… ê¸°ê°„**: 2025-12-05
- **ì•± ì´ë¦„**: `asset-mfe`
- **í¬íŠ¸**: 3107
- **ì´ í˜ì´ì§€ ìˆ˜**: 38ê°œ (ë¼ìš°íŠ¸ ê¸°ì¤€ 27ê°œ ë©”ì¸ ë©”ë‰´ + ìƒì„¸)

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. Vite ì•± ìƒì„± âœ“

ë‹¤ìŒ ì„¤ì • íŒŒì¼ë“¤ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤:

- `package.json` - ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸ ì •ì˜
- `vite.config.ts` - Module Federation ì„¤ì • í¬í•¨
- `tsconfig.json` - TypeScript ì»´íŒŒì¼ëŸ¬ ì„¤ì •
- `tsconfig.node.json` - Vite ì„¤ì •ìš© TypeScript ì„¤ì •
- `index.html` - ì•± ì—”íŠ¸ë¦¬ HTML
- `.env.example` - í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ

### 2. Module Federation ì„¤ì • âœ“

```typescript
federation({
  name: 'assetMfe',
  filename: 'remoteEntry.js',
  exposes: {
    './routes': './src/routes.tsx',
  },
  shared: {
    react: { singleton: true },
    'react-dom': { singleton: true },
    'react-router-dom': { singleton: true },
    '@tanstack/react-query': { singleton: true },
  },
});
```

- **í¬íŠ¸**: 3107
- **ë…¸ì¶œ ëª¨ë“ˆ**: `./routes` (Shell ì•±ì—ì„œ ë¡œë“œ ê°€ëŠ¥)

### 3. 27ê°œ ë©”ì¸ í˜ì´ì§€ êµ¬í˜„ (ì´ 38ê°œ í™”ë©´ ëŒ€ì‘) âœ“

ë©”ë‰´ êµ¬ì¡° ë¬¸ì„œ(`erpë©”ë‰´êµ¬ì¡°/08_ìì‚°ê´€ë¦¬_ë©”ë‰´.md`)ì— ë§ì¶° êµ¬í˜„í–ˆìŠµë‹ˆë‹¤:

#### ê¸°ì¤€ì •ë³´ê´€ë¦¬ (4ê°œ)

- ë²•ì •ë™, ìì‚°ë¶„ë¥˜, ë¬¼í’ˆë¶„ë¥˜, ë¬¼í’ˆê·œê²©

#### ìì‚°ëŒ€ì¥ê´€ë¦¬ (9ê°œ)

- ì·¨ë“, ì§€ì¶œê´€ë¦¬, ìƒì„¸ëŒ€ì¥, ìë³¸ì ì§€ì¶œ, ê°ê°€ìƒê°(K-water/ì¼ë°˜), ì²˜ë¶„ë‚´ì—­, ëª…ì„¸ì„œ, ì›ì¥

#### ê±´ì„¤ì¤‘ì¸ìì‚° (6ê°œ)

- ì¼ë°˜ì‚¬í•­, ì§„í–‰, ì™„ê³µëŒ€ì²´ì¡°ì„œ, ì™„ê³µì²˜ë¦¬, í˜„í™©, ì™„ê³µìì‚°

#### ìì‚°ë³€ë™ê´€ë¦¬ (5ê°œ)

- ë¶ˆìš©, ì²˜ë¶„, ê´€ë¦¬ì „í™˜, ë¶„í• , ë¶€ì„œì¼ê´„ë³€ê²½

#### ê°ê°€ìƒê°ê´€ë¦¬ (3ê°œ)

- ì˜¤ë¥˜ê²€ì¦, ìƒê°ì²˜ë¦¬(êµ¬/ì‹ )

### 4. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ë° ìœ í‹¸ë¦¬í‹° âœ“

**components/common.tsx** - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸:

- `PageLayout` - í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
- `DataTable` - ë°ì´í„° í…Œì´ë¸”
- `Button` - ë²„íŠ¼
- `SearchForm` - ê²€ìƒ‰ í¼
- `InputField`, `SelectField` - í¼ ì…ë ¥ í•„ë“œ

**lib/api-client.ts** - API í´ë¼ì´ì–¸íŠ¸:

- Axios ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •
- ìë™ í† í° ì¸ì¦
- Tenant ID í—¤ë” ì¶”ê°€

**types/index.ts** - TypeScript íƒ€ì… ì •ì˜:

- ìì‚° ê´€ë ¨ ì¸í„°í˜ì´ìŠ¤
- API ì‘ë‹µ íƒ€ì…

### 5. ë¼ìš°íŒ… ì„¤ì • âœ“

**routes.tsx** - ëª¨ë“  í˜ì´ì§€ì— ëŒ€í•œ ë¼ìš°íŠ¸ ì •ì˜:

```typescript
-/master/ * -ê¸°ì¤€ì •ë³´ê´€ë¦¬ -
  /ledger/ * -ìì‚°ëŒ€ì¥ê´€ë¦¬ -
  /construction/ * -ê±´ì„¤ì¤‘ì¸ìì‚° -
  /change/ * -ìì‚°ë³€ë™ê´€ë¦¬ -
  /depreciation/ * -ê°ê°€ìƒê°ê´€ë¦¬;
```

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
apps/frontend/asset-mfe/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ common.tsx (ê³µí†µ ì»´í¬ë„ŒíŠ¸)
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ master/          (ê¸°ì¤€ì •ë³´ê´€ë¦¬)
â”‚   â”‚   â”œâ”€â”€ ledger/          (ìì‚°ëŒ€ì¥ê´€ë¦¬)
â”‚   â”‚   â”œâ”€â”€ construction/    (ê±´ì„¤ì¤‘ì¸ìì‚°)
â”‚   â”‚   â”œâ”€â”€ change/          (ìì‚°ë³€ë™ê´€ë¦¬)
â”‚   â”‚   â””â”€â”€ depreciation/    (ê°ê°€ìƒê°ê´€ë¦¬)
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts (íƒ€ì… ì •ì˜)
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ api-client.ts (API í´ë¼ì´ì–¸íŠ¸)
â”‚   â”œâ”€â”€ routes.tsx (ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ main.tsx (ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸)
â”‚   â”œâ”€â”€ index.css (ìŠ¤íƒ€ì¼)
â”‚   â””â”€â”€ vite-env.d.ts (í™˜ê²½ ë³€ìˆ˜ íƒ€ì…)
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”— ë°±ì—”ë“œ DB êµ¬ì¡° ë¶„ì„

`apps/general/asset-service/prisma/schema.prisma` í™•ì¸ ê²°ê³¼:

í˜„ì¬ ë°±ì—”ë“œì—ëŠ” ë‹¤ìŒ ëª¨ë¸ë§Œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- `Asset` - ìì‚° ê¸°ë³¸ ì •ë³´
- `AssetHistory` - ìì‚° ì´ë ¥
- `ProcessedEvent`, `OutboxEvent` - ì´ë²¤íŠ¸ ì²˜ë¦¬

**ê¶Œì¥ ì‚¬í•­**: 38ê°œ í˜ì´ì§€ì— ëŒ€ì‘í•˜ëŠ” ì¶”ê°€ ëª¨ë¸ì´ í•„ìš”í•©ë‹ˆë‹¤:

- ê¸°ì¤€ì •ë³´ (AssetClassification, LegalDong)
- ê±´ì„¤ì¤‘ì¸ìì‚° (ConstructionAsset, ConstructionProgress)
- ê°ê°€ìƒê° (DepreciationSchedule, DepreciationHistory)
- ë³€ë™ê´€ë¦¬ (AssetDisposal, AssetTransfer)

## ğŸ”§ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
cd apps/frontend/asset-mfe
pnpm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev

# ë¹Œë“œ
pnpm build

# ë¯¸ë¦¬ë³´ê¸°
pnpm preview
```

## ğŸ“Š ì‘ì—… ê²°ê³¼ë¬¼

| í•­ëª©                   | ìƒíƒœ | ë¹„ê³                                   |
| ---------------------- | ---- | ------------------------------------- |
| Vite ì•± ìƒì„±           | âœ…   | ì™„ë£Œ                                  |
| Module Federation ì„¤ì • | âœ…   | ì™„ë£Œ - Port 3107                      |
| 38ê°œ í˜ì´ì§€ êµ¬í˜„       | âœ…   | ê¸°ë³¸ ìŠ¤ì¼ˆë ˆí†¤ ì™„ë£Œ (27ê°œ ë©”ì¸ ë¼ìš°íŠ¸) |
| Shell ì•± ì—°ë™          | â³   | Shell ì•± ì„¤ì •ì— ì´ë¯¸ í¬í•¨ë¨           |
| API ì—°ë™               | â³   | ë°±ì—”ë“œ API êµ¬í˜„ í•„ìš”                  |

## ğŸ¯ Why This Matters (ì´ˆê¸‰ìë¥¼ ìœ„í•œ ì„¤ëª…)

### Module Federationì´ë€?

ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì•±ì„ ë§ˆì¹˜ í•˜ë‚˜ì˜ ì•±ì²˜ëŸ¼ í†µí•©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

```
Shell App (ë©”ì¸ ì•±)
 â”œâ”€â”€ HR MFE (ì¸ì‚¬ ê´€ë¦¬)
 â”œâ”€â”€ General Affairs MFE (ì´ë¬´ ê´€ë¦¬)
 â”œâ”€â”€ Inventory MFE (ë¬¼í’ˆ ê´€ë¦¬)
 â””â”€â”€ Asset MFE (ìì‚° ê´€ë¦¬) â† ìš°ë¦¬ê°€ ë§Œë“  ì•±!
```

### ì‘ë™ ì›ë¦¬

```mermaid
graph LR
    A[Shell App<br/>localhost:3000] -->|ë™ì  ë¡œë“œ| B[Asset MFE<br/>localhost:3107]
    B -->|routes ë…¸ì¶œ| A
    A -->|ë Œë”ë§| C[ì‚¬ìš©ì ë¸Œë¼ìš°ì €]
```

### í˜ì´ì§€ êµ¬ì¡°

```mermaid
graph TB
    A[ìì‚° ê´€ë¦¬ 38ê°œ í˜ì´ì§€] --> B[ê¸°ì¤€ì •ë³´ê´€ë¦¬]
    A --> C[ìì‚°ëŒ€ì¥ê´€ë¦¬]
    A --> D[ê±´ì„¤ì¤‘ì¸ìì‚°]
    A --> E[ìì‚°ë³€ë™ê´€ë¦¬]
    A --> F[ê°ê°€ìƒê°ê´€ë¦¬]

    B --> B1[ìì‚°ë¶„ë¥˜]
    B --> B2[ë¬¼í’ˆê·œê²©]

    C --> C1[ìì‚°ì·¨ë“]
    C --> C2[ìì‚°ì›ì¥]

    D --> D1[ê³µì‚¬ì§„í–‰]
    D --> D2[ì™„ê³µì²˜ë¦¬]

    E --> E1[ìì‚°ë¶ˆìš©]
    E --> E2[ê´€ë¦¬ì „í™˜]

    F --> F1[ìƒê°ì²˜ë¦¬]
    F --> F2[ì˜¤ë¥˜ê²€ì¦]
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **Shell ì•± í†µí•©**: Shell ì•±ì˜ ì„¤ì •ì— asset-mfe í™•ì¸ (ì´ë¯¸ í¬í•¨ë¨)
2. **ë°±ì—”ë“œ API êµ¬í˜„**: 38ê°œ í˜ì´ì§€ì— í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸ ê°œë°œ (`asset-service`)
3. **DB ìŠ¤í‚¤ë§ˆ í™•ì¥**: Prisma ìŠ¤í‚¤ë§ˆì— í•„ìš”í•œ ëª¨ë¸ ì¶”ê°€
4. **ì‹¤ì œ ë°ì´í„° ì—°ë™**: ê° í˜ì´ì§€ì— React Queryë¥¼ ì‚¬ìš©í•œ ë°ì´í„° í˜ì¹­ êµ¬í˜„

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

### TypeScript ë¹Œë“œ ì—ëŸ¬

- **ì›ì¸**: React 18ê³¼ React Router DOM 6ì˜ íƒ€ì… ì •ì˜ ë¶ˆì¼ì¹˜
- **ì˜í–¥**: `pnpm build` ì‹¤íŒ¨
- **í•´ê²° ë°©ë²•**: `pnpm dev` (ê°œë°œ ì„œë²„)ëŠ” ì •ìƒ ì‘ë™
- **í–¥í›„ ì¡°ì¹˜**: React Router DOM ì—…ê·¸ë ˆì´ë“œ ë˜ëŠ” íƒ€ì… íŒ¨ì¹˜

## ğŸ“ ì°¸ê³  ìë£Œ

- ë©”ë‰´ êµ¬ì¡°: `/data/all-erp/erpë©”ë‰´êµ¬ì¡°/08_ìì‚°ê´€ë¦¬_ë©”ë‰´.md`
- ë°±ì—”ë“œ ì„œë¹„ìŠ¤: `/data/all-erp/apps/general/asset-service`
- íƒœìŠ¤í¬ ë¬¸ì„œ: `/data/all-erp/docs/tasks/v2-migration/phase5/TASK-P5-09-asset-mfe.md`

---

**ì‘ì—… ì™„ë£Œì¼**: 2025-12-05  
**ì‘ì„±ì**: Gemini AI Assistant
