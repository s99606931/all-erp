# PRD: CI/CD 파이프라인 구축

## 1. 개요 (Overview)
- **Task ID**: 2.2_cicd_pipeline
- **목표**: 코드 변경 사항을 자동으로 검증(Test/Lint)하고, 빌드하여 배포 가능한 아티팩트(Docker Image)를 생성하는 파이프라인을 구축합니다.
- **관련 로드맵**: Phase 2 - CI/CD 파이프라인

## 2. 상세 요구사항 (Requirements)
- [ ] **PR 검증 워크플로우**: Pull Request 생성 시 Lint, Test, Build 동작 수행
- [ ] **Nx Affected 기능 활용**: 변경된 프로젝트만 감지하여 빌드/테스트 수행 (시간 단축)
- [ ] **이미지 빌드 및 푸시**: Main 브랜치 병합 시 Docker Image 빌드 후 레지스트리(GHCR/ECR) 푸시

## 3. 기술적 의사결정 (Technical Decisions)

### 3.1 CI 도구
- **✅ 권장사항**: **GitHub Actions**
    - **이유**: 소스 코드와 통합되어 있고, Nx와의 호환성이 뛰어납니다.

### 3.2 캐싱 전략 (Caching)
- **Nx Cloud** 또는 **GitHub Actions Cache** 활용
    - `pnpm` 의존성 캐싱
    - Nx 빌드 결과 캐싱 (이전 빌드 재사용)

## 4. 작업 단위 (Work Breakdown)
1.  `.github/workflows/ci.yml`: PR 검증용 (Lint, Test)
2.  `.github/workflows/build-push.yml`: 이미지 빌드 및 푸시용
3.  Nx Cloud 설정 (선택 사항, 무료 티어 활용 검토)

## 5. 승인 기준 (Acceptance Criteria)
- [ ] PR을 올렸을 때 자동으로 테스트가 돌아가고 성공/실패 여부가 표시되어야 한다.
- [ ] 변경되지 않은 서비스는 빌드를 건너뛰어야 한다 (Nx Affected).
