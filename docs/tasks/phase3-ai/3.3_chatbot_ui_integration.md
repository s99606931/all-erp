# Task 3.3: AI Chatbot UI Integration

## 1. 개요 (Overview)

- **Task ID**: 3.3
- **목표**: `ShellLayout`에 AI Chatbot 위젯을 통합하여 사용자가 언제든지 AI 비서(RAG)와 대화할 수 있도록 한다.
- **선행 작업**: Task 2.3 (Shell Layout), Task 3.2 (RAG Backend)

## 2. 상세 요구사항 (Requirements)

1.  **UI Components (DevTools Style)**:
    - **Toggle Button**: 헤더 우측 상단 또는 사이드바에 'AI Assistant' 토글 버튼 배치.
    - **Dockable Side Panel**:
      - 화면 우측(또는 하단)에서 슬라이드되어 나오는 패널.
      - 메인 콘텐츠 영역을 덮지 않고(Overlay) 밀거나(Push), 또는 겹치되(Overlay) 크기 조절이 가능한 형태.
      - 초기 구현은 **Right Sidebar (Overlay/Shift)** 형태로 구현.
    - **Resizable (Optional)**: 패널 너비 조절 기능 (추후 고려).
    - **Message List & Input Area**: 기존 요구사항 동일.
2.  **API Integration**:
    - `ai-service`의 `/api/ai/rag` (또는 `/api/ai/chat`) 엔드포인트 호출.
    - 로딩 상태 표시 (Typing indicator).
3.  **State Management**:
    - 대화 기록(History)을 로컬 상태(useState) 또는 Zustand로 관리.
    - 창 열림/닫힘 상태 관리.

## 3. 기술적 의사결정 (Technical Decisions)

- **Location**: `libs/shared/ui-design` 라이브러리에 `AIChatWidget` 컴포넌트 추가.
- **Integration**: `ShellLayout`(`libs/shared/ui-design`) 내부에서 `AIChatWidget`을 렌더링하도록 수정.
- **Fetching**: `fetch` API 사용 (추후 Axios 교체 가능).
- **Proxy**: 로컬 개발 시 CORS 회피를 위해 Vite Proxy 설정 (`/api/ai` -> `http://localhost:3007`).

## 4. 작업 단위 (Work Units)

1.  **Component Development**: `libs/shared/ui-design/src/lib/components/ai/ai-chat-widget.tsx` 생성.
2.  **Layout Integration**: `ShellLayout`에 위젯 추가.
3.  **Proxy Configuration**: `apps/frontend/shell/vite.config.ts`에 Proxy 설정 추가.
4.  **Verification**: 셸 앱 실행 후 챗봇 동작 확인.

## 5. 승인 기준 (Acceptance Criteria)

- [ ] 셸 앱 우측 하단에 챗봇 아이콘이 표시되어야 한다.
- [ ] 아이콘 클릭 시 채팅창이 열리고 닫혀야 한다.
- [ ] 메시지를 입력하고 전송하면 `ai-service`로 요청이 전송되고 응답이 표시되어야 한다.
