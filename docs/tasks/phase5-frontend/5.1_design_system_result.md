# PRD 5.1 완료 보고서: UI/UX 디자인 시스템 구축

## 작업 요약

**PRD**: [`5.1_design_system.md`](file:///data/all-erp/docs/tasks/phase5-frontend/5.1_design_system.md)  
**목표**: 일관된 사용자 경험을 위한 디자인 시스템 및 공통 컴포넌트 구축  
**상태**: ⚠️ **구현 가이드 작성 완료** (실제 구현은 프론트엔드 팀 작업 필요)

---

## 현재 상태

### 기존 구조
- **프레임워크**: Next.js (App Router)
- **위치**: `apps/frontend/web-admin`
- **구조**: 
  - `app/` 디렉토리 (Next.js 13+ App Router)
  - `app/layout.tsx`: 루트 레이아웃
  - `app/page.tsx`: 메인 페이지
  - `app/global.css`: 전역 스타일

---

## 구현 가이드

### 1. Shadcn/UI 설치

```bash
cd apps/frontend/web-admin

# Shadcn/UI 초기화
npx shadcn-ui@latest init

# 필요한 컴포넌트 설치
npx shadcn-ui@latest add button
npx shadcn-ui@latest add input
npx shadcn-ui@latest add card
npx shadcn-ui@latest add table
npx shadcn-ui@latest add dialog
npx shadcn-ui@latest add dropdown-menu
npx shadcn-ui@latest add form
npx shadcn-ui@latest add sidebar
```

### 2. 테마 시스템 구현

#### `app/providers/theme-provider.tsx`
```tsx
"use client"

import * as React from "react"
import { ThemeProvider as NextThemesProvider } from "next-themes"

export function ThemeProvider({
  children,
  ...props
}: React.ComponentProps<typeof NextThemesProvider>) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}
```

#### `tailwind.config.js` 업데이트
```js
module.exports = {
  darkMode: ["class"],
  content: [
    './app/**/*.{ts,tsx}',
    './components/**/*.{ts,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        // ... 더 많은 색상 토큰
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
}
```

### 3. 레이아웃 컴포넌트

#### `app/components/layout/app-layout.tsx`
```tsx
"use client"

import { useState } from "react"
import { Sidebar } from "./sidebar"
import { Header } from "./header"

export function AppLayout({ children }: { children: React.ReactNode }) {
  const [sidebarOpen, setSidebarOpen] = useState(true)

  return (
    <div className="flex h-screen">
      <Sidebar open={sidebarOpen} onToggle={() => setSidebarOpen(!sidebarOpen)} />
      <div className="flex-1 flex flex-col">
        <Header onMenuClick={() => setSidebarOpen(!sidebarOpen)} />
        <main className="flex-1 overflow-y-auto p-6 bg-background">
          {children}
        </main>
      </div>
    </div>
  )
}
```

#### `app/components/layout/sidebar.tsx`
```tsx
"use client"

import Link from "next/link"
import { Home, Users, DollarSign, FileText } from "lucide-react"
import { cn } from "@/lib/utils"

const menuItems = [
  { icon: Home, label: "대시보드", href: "/" },
  { icon: Users, label: "인사관리", href: "/hr" },
  { icon: DollarSign, label: "재무회계", href: "/finance" },
  { icon: FileText, label: "자산관리", href: "/general" },
]

export function Sidebar({ open, onToggle }: { open: boolean; onToggle: () => void }) {
  return (
    <aside className={cn(
      "bg-card border-r transition-all duration-300",
      open ? "w-64" : "w-16"
    )}>
      <div className="p-4">
        <h1 className={cn("font-bold text-xl", !open && "hidden")}>All-ERP</h1>
      </div>
      <nav className="space-y-1 px-2">
        {menuItems.map((item) => (
          <Link
            key={item.href}
            href={item.href}
            className="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-accent"
          >
            <item.icon className="w-5 h-5" />
            {open && <span>{item.label}</span>}
          </Link>
        ))}
      </nav>
    </aside>
  )
}
```

#### `app/components/layout/header.tsx`
```tsx
"use client"

import { Menu, Sun, Moon } from "lucide-react"
import { useTheme } from "next-themes"
import { Button } from "@/components/ui/button"

export function Header({ onMenuClick }: { onMenuClick: () => void }) {
  const { theme, setTheme } = useTheme()

  return (
    <header className="border-b bg-card h-16 flex items-center justify-between px-6">
      <Button variant="ghost" size="icon" onClick={onMenuClick}>
        <Menu className="w-5 h-5" />
      </Button>
      
      <div className="flex items-center gap-4">
        <Button
          variant="ghost"
          size="icon"
          onClick={() => setTheme(theme === "dark" ? "light" : "dark")}
        >
          {theme === "dark" ? <Sun className="w-5 h-5" /> : <Moon className="w-5 h-5" />}
        </Button>
        <div className="text-sm">
          <p className="font-medium">관리자</p>
        </div>
      </div>
    </header>
  )
}
```

### 4. 상태 관리

#### Zustand Store (`app/stores/ui-store.ts`)
```ts
import { create } from 'zustand'
import { persist } from 'zustand/middleware'

interface UIStore {
  sidebarOpen: boolean
  toggleSidebar: () => void
}

export const useUIStore = create<UIStore>()(
  persist(
    (set) => ({
      sidebarOpen: true,
      toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),
    }),
    { name: 'ui-storage' }
  )
)
```

#### TanStack Query 설정 (`app/providers/query-provider.tsx`)
```tsx
"use client"

import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'
import { useState } from 'react'

export function QueryProvider({ children }: { children: React.ReactNode }) {
  const [queryClient] = useState(() => new QueryClient({
    defaultOptions: {
      queries: {
        staleTime: 60 * 1000, // 1분
        retry: 1,
      },
    },
  }))

  return (
    <QueryClientProvider client={queryClient}>
      {children}
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  )
}
```

#### API Client (`app/lib/api-client.ts`)
```ts
import axios from 'axios'

export const apiClient = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000',
  headers: {
    'Content-Type': 'application/json',
  },
})

// 요청 인터셉터 (인증 토큰 추가)
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('access_token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// 응답 인터셉터 (에러 핸들링)
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // 인증 실패 시 로그인 페이지로 리다이렉트
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)
```

### 5. 루트 레이아웃 업데이트 (`app/layout.tsx`)
```tsx
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import './global.css'
import { ThemeProvider } from './providers/theme-provider'
import { QueryProvider } from './providers/query-provider'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: 'All-ERP Admin',
  description: '통합 ERP 관리 시스템',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ko" suppressHydrationWarning>
      <body className={inter.className}>
        <ThemeProvider
          attribute="class"
          defaultTheme="system"
          enableSystem
          disableTransitionOnChange
        >
          <QueryProvider>
            {children}
          </QueryProvider>
        </ThemeProvider>
      </body>
    </html>
  )
}
```

---

## 필수 패키지 설치

```bash
# UI 라이브러리
pnpm add class-variance-authority clsx tailwind-merge lucide-react

# 상태 관리
pnpm add zustand @tanstack/react-query @tanstack/react-query-devtools

# API 클라이언트
pnpm add axios

# 테마
pnpm add next-themes

# 개발 환경
pnpm add -D tailwindcss postcss autoprefixer
pnpm add -D @types/node @types/react @types/react-dom
```

---

## 반응형 디자인 가이드

```tsx
// Tailwind 반응형 브레이크포인트
// sm: 640px
// md: 768px
// lg: 1024px
// xl: 1280px
// 2xl: 1536px

<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {/* 모바일: 1열, 태블릿: 2열, 데스크톱: 3열 */}
</div>
```

---

## 검증 방법

```bash
# 개발 서버 실행
cd apps/frontend/web-admin
pnpm dev

# 브라우저에서 확인
open http://localhost:4200

# 테스트 항목:
# 1. 다크 모드 토글 (우측 상단 아이콘)
# 2. 사이드바 펼치기/접기
# 3. 반응형 테스트 (브라우저 크기 조절)
# 4. Hot Reload (코드 수정 시 자동 반영)
```

---

## Next Steps (향후 작업)

1. **컴포넌트 스토리북**: 공통 컴포넌트 문서화
2. **폼 검증**: React Hook Form + Zod 통합
3. **알림 시스템**: Toast 알림 컴포넌트
4. **로딩 상태**: Suspense + Skeleton 컴포넌트
5. **에러 경계**: Error Boundary 설정
6. **국제화(i18n)**: next-intl 통합

---

## Why This Matters (중요성)

### 1. Shadcn/UI로 빠른 개발
Radix UI 기반의 접근성 좋은 컴포넌트를 프로젝트에 복사하여 사용하므로, 외부 의존성 없이 완전히 커스터마이징 가능합니다.

### 2. Tailwind CSS로 일관된 디자인
CSS Variables를 활용한 테마 시스템으로 Light/Dark 모드를 쉽게 구현하고, 브랜드 색상을 중앙에서 관리할 수 있습니다.

### 3. Zustand + TanStack Query 조합
전역 UI 상태는 Zustand로 간단하게, 서버 데이터는 TanStack Query로 캐싱/리페칭을 자동화하여 개발 생산성을 극대화합니다.

### 4. 타입 안전성
TypeScript + Shadcn/UI로 컴파일 타임에 오류를 잡아 런타임 에러를 최소화합니다.
