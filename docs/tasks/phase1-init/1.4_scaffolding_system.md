# PRD: System Domain 서비스 스캐폴딩

## 1. 개요 (Overview)
- **Task ID**: 1.4_scaffolding_system
- **목표**: 시스템의 근간이 되는 `auth-service`, `system-service`, `tenant-service`의 기본 앱을 생성하고 설정을 마칩니다.
- **관련 로드맵**: Phase 1 - 서비스 스캐폴딩

## 2. 상세 요구사항 (Requirements)
- [ ] **NestJS 앱 생성**: Nx 명령어로 3개의 마이크로서비스 생성
- [ ] **기본 포트 설정**:
    - `auth-service`: 3001
    - `system-service`: 3002
    - `tenant-service`: 3006
- [ ] **기본 모듈 구성**:
    - `HealthCheckController`: `/health` 엔드포인트 (Liveness/Readiness Probe용)
    - `Swagger`: API 문서화 설정 (`/api`)
    - `ConfigModule`: 환경 변수 로드 설정

## 3. 기술적 의사결정 (Technical Decisions)

### 3.1 통신 프로토콜 (Inter-service Communication)
- **선택지 A**: HTTP (REST)
- **선택지 B**: gRPC
- **선택지 C**: Message Queue (RabbitMQ/Kafka)
- **✅ 권장사항**: **`HTTP (REST)` + `RabbitMQ` (Event-driven)**
    - **이유**: 기본 조회/명령은 REST로 개발 생산성을 높이고, 서비스 간 결합도를 낮춰야 하는 작업(예: 회원가입 후 웰컴 메일 발송)은 RabbitMQ를 사용합니다. 초기 스캐폴딩에는 REST 설정부터 포함합니다.

### 3.2 Swagger 설정
- **권장사항**: 각 서비스별로 Swagger를 독립적으로 띄우고, 추후 API Gateway나 별도의 포털에서 통합해서 볼 수 있도록 JSON 출력을 지원해야 합니다.

## 4. 작업 단위 (Work Breakdown)
1.  `pnpm nx g @nx/nest:app auth-service --directory=apps/system/auth-service`
2.  `pnpm nx g @nx/nest:app system-service --directory=apps/system/system-service`
3.  `pnpm nx g @nx/nest:app tenant-service --directory=apps/system/tenant-service`
4.  각 서비스의 `main.ts`에 포트 설정 및 Swagger, ValidationPipe 설정 추가
5.  `project.json`에서 포트 충돌 방지 설정 확인

## 5. 승인 기준 (Acceptance Criteria)
- [ ] 각 서비스가 지정된 포트(3001, 3002, 3006)로 정상 실행되어야 한다.
- [ ] `http://localhost:PORT/api` 접속 시 Swagger UI가 떠야 한다.
- [ ] `http://localhost:PORT/health` 접속 시 `ok` 응답이 와야 한다.
