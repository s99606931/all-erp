# HR Domain ì„œë¹„ìŠ¤ ìŠ¤ìºí´ë”© ê²°ê³¼ ë³´ê³ ì„œ

## ì‘ì—… ìš”ì•½

PRD 1.5_scaffolding_hr.mdì— ë”°ë¼ HR Domainì˜ í•µì‹¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ 3ê°œë¥¼ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•˜ê³  Docker Compose ê°œë°œ í™˜ê²½ì— í†µí•©í–ˆìŠµë‹ˆë‹¤.

## ìˆ˜í–‰ ë‚´ìš©

### 1. NestJS ì•± ìƒì„±

Nx CLIë¥¼ ì‚¬ìš©í•˜ì—¬ 3ê°œì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤:

```bash
# Personnel Service (ì¸ì‚¬ ì •ë³´ ê´€ë¦¬)
pnpm nx g @nx/nest:app --directory=apps/hr/personnel-service --name=personnel-service --no-interactive

# Payroll Service (ê¸‰ì—¬ ê³„ì‚° ë° ê´€ë¦¬)
pnpm nx g @nx/nest:app --directory=apps/hr/payroll-service --name=payroll-service --no-interactive

# Attendance Service (ê·¼íƒœ ê´€ë¦¬)
pnpm nx g @nx/nest:app --directory=apps/hr/attendance-service --name=attendance-service --no-interactive
```

### 2. ê° ì„œë¹„ìŠ¤ ê¸°ë³¸ ì„¤ì •

System Domain ì„œë¹„ìŠ¤ì™€ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ê° ì„œë¹„ìŠ¤ë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤:

#### Personnel Service (í¬íŠ¸ 3011)
- **Swagger UI**: "Personnel Service - ì¸ì‚¬ ì •ë³´ ê´€ë¦¬ API"
- **Health Check**: `/api/health` ì—”ë“œí¬ì¸íŠ¸
- **ValidationPipe**: ìš”ì²­ ë°ì´í„° ìë™ ê²€ì¦
- **ConfigModule**: í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ

#### Payroll Service (í¬íŠ¸ 3012)
- **Swagger UI**: "Payroll Service - ê¸‰ì—¬ ê³„ì‚° ë° ê´€ë¦¬ API"
- **Health Check**: `/api/health` ì—”ë“œí¬ì¸íŠ¸
- **ValidationPipe**: ìš”ì²­ ë°ì´í„° ìë™ ê²€ì¦
- **ConfigModule**: í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ

#### Attendance Service (í¬íŠ¸ 3013)
- **Swagger UI**: "Attendance Service - ê·¼íƒœ ê´€ë¦¬ API"
- **Health Check**: `/api/health` ì—”ë“œí¬ì¸íŠ¸
- **ValidationPipe**: ìš”ì²­ ë°ì´í„° ìë™ ê²€ì¦
- **ConfigModule**: í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ

### 3. Docker Compose í†µí•©

[docker-compose.dev.yml](file:///data/all-erp/dev-environment/docker-compose.dev.yml)ì— 3ê°œ ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤:

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ë””ë²„ê¹… í¬íŠ¸ | ì»¨í…Œì´ë„ˆëª… |
|--------|------|-------------|------------|
| personnel-service | 3011 | 9232 | all-erp-personnel-service-dev |
| payroll-service | 3012 | 9233 | all-erp-payroll-service-dev |
| attendance-service | 3013 | 9234 | all-erp-attendance-service-dev |

**ì£¼ìš” ì„¤ì •**:
- ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¥¼ í†µí•œ Hot Reload ì§€ì›
- PostgreSQL, Redis, RabbitMQ ì—°ê²° ì„¤ì •
- all-erp-network ë„¤íŠ¸ì›Œí¬ ê³µìœ 

## ê²€ì¦ ê²°ê³¼

### 1. Docker Compose ì‹¤í–‰

```bash
cd dev-environment
docker compose -f docker-compose.infra.yml -f docker-compose.dev.yml up -d personnel-service payroll-service attendance-service
```

**ê²°ê³¼**: âœ… ëª¨ë“  ì»¨í…Œì´ë„ˆ ì •ìƒ ì‹œì‘

### 2. Health Check í™•ì¸

```bash
# Personnel Service
curl http://localhost:3011/api/health
# ì‘ë‹µ: {"status":"ok","service":"personnel-service"}

# Payroll Service
curl http://localhost:3012/api/health
# ì‘ë‹µ: {"status":"ok","service":"payroll-service"}

# Attendance Service
curl http://localhost:3013/api/health
# ì‘ë‹µ: {"status":"ok","service":"attendance-service"}
```

**ê²°ê³¼**: âœ… ëª¨ë“  ì„œë¹„ìŠ¤ Health Check ì„±ê³µ

### 3. Swagger UI í™•ì¸

ë‹¤ìŒ URLì—ì„œ Swagger UIì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Personnel Service**: http://localhost:3011/api
- **Payroll Service**: http://localhost:3012/api
- **Attendance Service**: http://localhost:3013/api

**ê²°ê³¼**: âœ… ëª¨ë“  ì„œë¹„ìŠ¤ Swagger UI ì •ìƒ í‘œì‹œ

### 4. ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸

```
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [NestFactory] Starting Nest application...
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [InstanceLoader] ConfigHostModule dependencies initialized +17ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [InstanceLoader] AppModule dependencies initialized +0ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [InstanceLoader] ConfigModule dependencies initialized +1ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [RoutesResolver] AppController {/api}: +181ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [RouterExplorer] Mapped {/api, GET} route +4ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [RouterExplorer] Mapped {/api/health, GET} route +1ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG [NestApplication] Nest application successfully started +2ms
[Nest] 905  - 12/01/2025, 2:15:22 PM     LOG ğŸš€ Application is running on: http://localhost:3011/api
```

**ê²°ê³¼**: âœ… ëª¨ë“  ë¼ìš°íŠ¸ ì •ìƒ ë§¤í•‘, ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ìƒ ì‹œì‘

## ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph TB
    subgraph "HR Domain Services"
        direction LR
        Personnel["Personnel Service<br/>(ì¸ì‚¬ ì •ë³´ ê´€ë¦¬)<br/>:3011"]
        Payroll["Payroll Service<br/>(ê¸‰ì—¬ ê³„ì‚°)<br/>:3012"]
        Attendance["Attendance Service<br/>(ê·¼íƒœ ê´€ë¦¬)<br/>:3013"]
    end
    
    subgraph "Infrastructure"
        direction LR
        DB[(PostgreSQL)]
        Redis[(Redis)]
        MQ[RabbitMQ]
    end
    
    Personnel --> DB
    Personnel --> Redis
    Personnel --> MQ
    
    Payroll --> DB
    Payroll --> Redis
    Payroll --> MQ
    
    Attendance --> DB
    Attendance --> Redis
    Attendance --> MQ
    

```

## ì‘ì—… íš¨ê³¼ (Why This Matters)

### 1. ë„ë©”ì¸ ë¶„ë¦¬ (Domain Separation)
HR Domainì„ ë…ë¦½ëœ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨:
- **ë…ë¦½ì ì¸ ë°°í¬**: ì¸ì‚¬ ê´€ë ¨ ê¸°ëŠ¥ ë³€ê²½ ì‹œ ë‹¤ë¥¸ ë„ë©”ì¸ì— ì˜í–¥ ì—†ìŒ
- **í™•ì¥ì„±**: ê° ì„œë¹„ìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥
- **ì¥ì•  ê²©ë¦¬**: í•œ ì„œë¹„ìŠ¤ì˜ ë¬¸ì œê°€ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ

### 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ì‚°
- **Personnel Service**: ì§ì› ì •ë³´, ì¡°ì§ë„, ì¸ì‚¬ ë°œë ¹ ë“±
- **Payroll Service**: ê¸‰ì—¬ ê³„ì‚°, ìˆ˜ë‹¹ ê´€ë¦¬, ì„¸ê¸ˆ ì²˜ë¦¬ ë“±
- **Attendance Service**: ì¶œí‡´ê·¼ ê¸°ë¡, íœ´ê°€ ê´€ë¦¬, ê·¼ë¬´ ì‹œê°„ ì§‘ê³„ ë“±

ê° ì„œë¹„ìŠ¤ê°€ ëª…í™•í•œ ì±…ì„ì„ ê°€ì§€ë¯€ë¡œ ì½”ë“œ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•©ë‹ˆë‹¤.

### 3. Docker-First ê°œë°œ í™˜ê²½
ëª¨ë“  ì„œë¹„ìŠ¤ê°€ Docker Composeë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ:
- **í™˜ê²½ ì¼ê´€ì„±**: ê°œë°œì ê°„ í™˜ê²½ ì°¨ì´ ìµœì†Œí™”
- **ë¹ ë¥¸ ì˜¨ë³´ë”©**: ìƒˆë¡œìš´ ê°œë°œìê°€ `docker compose up` í•œ ë²ˆìœ¼ë¡œ ì „ì²´ í™˜ê²½ êµ¬ì¶•
- **í”„ë¡œë•ì…˜ ìœ ì‚¬ì„±**: ê°œë°œ í™˜ê²½ì´ ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•˜ì—¬ ë°°í¬ ì‹œ ë¬¸ì œ ìµœì†Œí™”

## ë‹¤ìŒ ë‹¨ê³„

1. **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„**: Prismaë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì„œë¹„ìŠ¤ì˜ DB ìŠ¤í‚¤ë§ˆ ì •ì˜
2. **ë„ë©”ì¸ ëª¨ë¸ êµ¬í˜„**: ì¸ì‚¬, ê¸‰ì—¬, ê·¼íƒœ ê´€ë ¨ ì—”í‹°í‹° ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„
3. **ì„œë¹„ìŠ¤ ê°„ í†µì‹ **: RabbitMQë¥¼ í†µí•œ ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  êµ¬í˜„
4. **ì¸ì¦/ì¸ê°€ í†µí•©**: Auth Serviceì™€ ì—°ë™í•˜ì—¬ JWT ê¸°ë°˜ ì¸ì¦ ì ìš©

## ì°¸ê³  ë¬¸ì„œ

- [PRD 1.5_scaffolding_hr.md](file:///data/all-erp/docs/tasks/phase1-init/1.5_scaffolding_hr.md)
- [Docker-First Workflow Guide](file:///data/all-erp/docs/guides/docker-first-workflow.md)
- [docker-compose.dev.yml](file:///data/all-erp/dev-environment/docker-compose.dev.yml)

---

**ì‘ì—… ì™„ë£Œì¼**: 2025-12-01  
**ì‘ì—…ì**: AI Agent (Gemini)  
**ìŠ¹ì¸ ê¸°ì¤€**: âœ… ëª¨ë“  í•­ëª© ì¶©ì¡±
