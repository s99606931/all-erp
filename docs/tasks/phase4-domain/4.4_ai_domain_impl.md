# PRD: AI Domain 서비스 구현

## 1. 개요 (Overview)
- **Task ID**: 4.4_ai_domain_impl
- **목표**: LLM 및 ML 모델을 활용한 지능형 업무 자동화 기능을 구현합니다.
- **관련 로드맵**: Phase 4 - AI Domain 서비스 병렬 개발

## 2. 상세 요구사항 (Requirements)

### 2.1 AI Assistant (사내 규정 챗봇)
- [ ] **RAG Pipeline**: 사내 규정 문서를 Embedding하여 Vector DB에 저장
- [ ] **질의응답**: 사용자 질문에 대해 관련 규정을 검색하고 LLM으로 답변 생성
- [ ] **Prompt Engineering**: 정확한 답변을 위한 프롬프트 템플릿 작성

### 2.2 Automated Accounting (자동 분개)
- [ ] **OCR**: 영수증 이미지를 텍스트로 변환 (Google Vision API 또는 Tesseract)
- [ ] **계정과목 추천**: 영수증 내용을 분석하여 적합한 계정과목 추천
- [ ] **신뢰도 표시**: AI 추천 결과의 신뢰도를 함께 제공하여 사용자가 최종 판단

### 2.3 Anomaly Detection (이상 탐지)
- [ ] **법인카드 사용 패턴 분석**: 평소와 다른 거래가 발생하면 알림
- [ ] **예산 초과 조기 경보**: 현재 집행 추세로는 예산 초과가 예상될 경우 미리 경고

## 3. 기술적 의사결정 (Technical Decisions)

### 3.1 LLM 선택
- **선택지 A**: **OpenAI GPT-4** (유료, 품질 최고)
- **선택지 B**: **Claude 3.5** (유료, 긴 컨텍스트)
- **선택지 C**: **오픈소스 모델** (Llama 3.1, 자체 호스팅 필요)
- **✅ 권장사항**: **GPT-4o** (초기) → **비용 검토 후 오픈소스 전환 고려**

### 3.2 Vector DB
- **선택지 A**: **Pinecone** (Managed, 간편)
- **선택지 B**: **Weaviate / Qdrant** (Self-hosted, 비용 절감)
- **✅ 권장사항**: **Pinecone** (프로토타입) → **Qdrant** (운영)

### 3.3 OCR 엔진
- **✅ 권장사항**: **Google Cloud Vision API** (한글 인식률 우수)

## 4. 작업 단위 (Work Breakdown)
1.  LangChain 기반 RAG 파이프라인 구축
2.  사내 규정 문서 Embedding 및 Vector DB 저장
3.  OCR API 연동 및 텍스트 전처리
4.  계정과목 추천 모델 학습 또는 Few-shot Prompting 구현
5.  이상 탐지 기준선(Baseline) 설정 및 알림 로직

## 5. 승인 기준 (Acceptance Criteria)
- [ ] "육아휴직은 며칠인가요?" 질문에 정확한 규정을 답변해야 한다.
- [ ] 영수증 이미지를 업로드하면 내용이 추출되고 계정과목이 추천되어야 한다.
- [ ] 비정상적인 법인카드 사용 시 담당자에게 알림이 발송되어야 한다.
