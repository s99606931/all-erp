# PRD: 시스템 및 테넌트 관리 서비스 구현

## 1. 개요 (Overview)
- **Task ID**: 3.3_system_tenant_impl
- **목표**: SaaS 운영을 위한 테넌트 관리 기능과 시스템 전반의 공통 데이터(코드, 조직)를 관리하는 기능을 구현합니다.
- **관련 로드맵**: Phase 3 - 시스템 및 테넌트 관리

## 2. 상세 요구사항 (Requirements)
- [ ] **테넌트 관리 (`tenant-service`)**:
    - 테넌트 생성 (Onboarding): 신규 고객사 등록 및 초기 데이터(Admin 계정, 스키마) 생성
    - 구독 관리: 서비스 이용 기간 및 플랜 관리
- [ ] **시스템 관리 (`system-service`)**:
    - 공통 코드 관리: 시스템 전반에서 사용하는 코드(직급, 부서 유형 등) 관리
    - 조직/부서 관리: 테넌트별 조직도 트리 구조 관리

## 3. 기술적 의사결정 (Technical Decisions)

### 3.1 테넌트 생성 프로세스 (Onboarding)
- 테넌트 생성 요청 -> `tenant-service` DB 등록 -> **Event 발행 (TenantCreated)** -> `auth-service`, `system-service` 등 타 서비스에서 해당 테넌트용 초기 데이터/스키마 생성 (비동기 처리)

### 3.2 공통 코드 캐싱
- 공통 코드는 변경 빈도가 낮고 조회 빈도가 높으므로 **Redis**를 활용한 캐싱 전략을 적용합니다.

## 4. 작업 단위 (Work Breakdown)
1.  `tenant-service`: Tenant 엔티티 설계 및 CRUD API 구현
2.  `system-service`: CommonCode, Department 엔티티 설계 및 CRUD API 구현
3.  테넌트 생성 시 스키마 마이그레이션 자동화 스크립트 작성

## 5. 승인 기준 (Acceptance Criteria)
- [ ] 신규 테넌트를 생성하면 해당 테넌트용 DB 스키마가 자동으로 생성되어야 한다.
- [ ] 각 테넌트별로 독립적인 조직도를 구성할 수 있어야 한다.
