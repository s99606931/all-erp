// report-service용 독립 Prisma 스키마

datasource db {
    provider = "postgresql"
}

generator client {
    provider      = "prisma-client-js"
    binaryTargets = ["native", "debian-openssl-3.0.x"]
    output        = "../node_modules/.prisma/report-client"
    engineType    = "library"
}

// 보고서
model Report {
    id           Int      @id @default(autoincrement())
    title        String
    reportType   String   @map("report_type") // PERSONNEL, PAYROLL, BUDGET, ACCOUNTING, ATTENDANCE, ASSET, SUPPLY, etc.
    format       String // PDF, EXCEL, CSV
    status       String // PENDING, PROCESSING, COMPLETED, FAILED
    generatedBy  Int      @map("generated_by")
    fileUrl      String?  @map("file_url")
    errorMessage String?  @map("error_message")
    tenantId     Int      @map("tenant_id")
    createdAt    DateTime @default(now()) @map("created_at")
    updatedAt    DateTime @updatedAt @map("updated_at")

    @@index([tenantId])
    @@index([reportType])
    @@index([status])
    @@index([createdAt])
    @@map("reports")
}

// 보고서 템플릿
model ReportTemplate {
    id           Int      @id @default(autoincrement())
    name         String
    description  String?
    reportType   String   @map("report_type")
    templateData String   @map("template_data") // JSON 형식의 템플릿 설정
    isActive     Boolean  @default(true) @map("is_active")
    tenantId     Int      @map("tenant_id")
    createdAt    DateTime @default(now()) @map("created_at")
    updatedAt    DateTime @updatedAt @map("updated_at")

    @@index([tenantId])
    @@index([reportType])
    @@index([isActive])
    @@map("report_templates")
}
